"""Генератор реалистичных тестовых данных для рекламных кампаний."""
import random
from dataclasses import dataclass
from faker import Faker

fake = Faker("ru_RU")


@dataclass
class CampaignData:
    """Сгенерированные данные кампании."""
    name: str
    product_search: str
    utm_link: str
    thematic: str
    task: str
    max_compensation: str


# ── Тематики (все из UI) ─────────────────────────────────────

THEMATICS = [
    "Авто и мото",
    "Бизнес и инвестиции",
    "Животные и природа",
    "Дети и родители",
    "Еда и кулинария",
    "Здоровье и медицина",
    "Знаменитости",
    "Личные блоги и образ жизни",
    "Искусство и дизайн",
    "Фотография и кино",
    "Книги и подкасты",
    "Красота и уход",
    "Культура и события",
    "Мода и стиль",
    "Музыка",
    "Наука и технологии",
    "Недвижимость",
    "Новости и СМИ",
    "Образование",
    "Путешествия и туризм",
    "Вакансии и поиск работы",
    "Религия",
    "Скидки и акции",
    "Спорт и отдых",
    "Строительство и ремонт",
    "Хобби и увлечения",
    "Юмор и развлечения",
    "Дом и сад",
    "Игры и консоли",
    "Другое",
]

# ── Шаблоны заданий ──────────────────────────────────────────

TASK_TEMPLATES = [
    (
        "Снять видео про распаковку + ИСПОЛЬЗОВАНИЕ ТОВАРА ПО НАЗНАЧЕНИЮ\n\n"
        "1. Найти товар по ключевому запросу «{keyword}».\n"
        "   Ввести в поисковой строке запрос, сделать фильтр по цене от {price_from} до {price_to}. "
        "Указать страну производства «Россия».\n"
        "   Полистать, добавить в корзину два любых товара.\n"
        "   Найти наш товар, добавить в корзину.\n"
        "   Выкупить на следующий день.\n\n"
        "2. Оставить отзыв на WB с фото и 5 ⭐\n\n"
        "✅ Вариант отзыва (необходимо переделать под себя):\n"
        "{review_text}"
    ),
    (
        "Сделать обзор товара в формате Reels/Stories\n\n"
        "1. Найти товар по ключевому запросу «{keyword}» на маркетплейсе.\n"
        "   Применить фильтр по цене от {price_from} до {price_to} ₽.\n"
        "   Добавить в корзину наш товар + 1-2 любых других.\n"
        "   Оформить заказ.\n\n"
        "2. Снять распаковку и первое использование на камеру.\n\n"
        "3. Оставить отзыв с фото, 5 ⭐:\n"
        "«{review_text}»"
    ),
    (
        "Интеграция в контент блогера\n\n"
        "1. Выкупить товар по запросу «{keyword}».\n"
        "   Фильтр: цена {price_from}–{price_to} ₽, Россия.\n"
        "   Полистать каталог, положить 2-3 товара в корзину, включая наш.\n"
        "   Выкупить.\n\n"
        "2. Показать товар в ежедневном контенте (stories/reels).\n\n"
        "3. Написать отзыв на маркетплейсе (5 ⭐, фото):\n"
        "«{review_text}»"
    ),
]

# ── Ключевые слова для поиска ─────────────────────────────────

KEYWORDS = [
    "крем после бритья для мужчин",
    "гвозди для пистолета строительные",
    "шампунь восстанавливающий",
    "беспроводная зарядка для телефона",
    "органайзер в багажник",
    "скакалка скоростная фитнес",
    "маска для лица увлажняющая",
    "USB кабель Type-C",
    "набор фитнес-резинок",
    "полироль для кузова авто",
]

# ── Шаблоны отзывов ──────────────────────────────────────────

REVIEW_TEMPLATES = [
    (
        "Брала мужу из-за небольшого объема в командировки. Очень удобно, "
        "занимает совсем немного места, да еще и выполняет две функции. "
        "Муж сначала начал бубнить, что заказала ему новинку, а попробовав, "
        "сказал, что понравился ему! Отметил, что нет липкого слоя после "
        "нанесения и быстро впитывается."
    ),
    (
        "Заказывала себе попробовать, очень довольна! Качество отличное, "
        "цена адекватная. Пользуюсь уже вторую неделю — результат виден. "
        "Упаковка красивая, можно брать на подарок."
    ),
    (
        "Долго выбирала среди аналогов, остановилась на этом. Не пожалела! "
        "Удобный формат, приятный дизайн. Рекомендую всем, кто ещё "
        "в раздумьях — берите, не пожалеете."
    ),
    (
        "Отличная вещь за свои деньги. Пользуюсь каждый день, полностью "
        "оправдывает ожидания. Доставка была быстрой. Ставлю 5 звёзд!"
    ),
]


def generate_campaign_data(
    product_name: str,
    product_price: int = 75,
) -> CampaignData:
    """Сгенерировать реалистичные рандомные данные кампании.

    Args:
        product_name: Название продукта для поиска в combobox «Предмет рекламы».
        product_price: Цена продукта для расчёта компенсации (+20% + рандом до 200₽).
    """
    # Название кампании
    name = f"Тестовая кампания — {fake.catch_phrase()}"

    # UTM-ссылка
    utm_link = (
        f"https://example.com/promo?"
        f"utm_source=rizz&utm_medium=blogger"
        f"&utm_campaign={fake.slug()}"
        f"&utm_content={random.randint(1000, 9999)}"
    )

    # Тематика — рандомная
    thematic = random.choice(THEMATICS)

    # Задание — по шаблону
    keyword = random.choice(KEYWORDS)
    price_from = random.randint(200, 500)
    price_to = price_from + random.randint(100, 400)
    review_text = random.choice(REVIEW_TEMPLATES)
    task_template = random.choice(TASK_TEMPLATES)
    task = task_template.format(
        keyword=keyword,
        price_from=price_from,
        price_to=price_to,
        review_text=review_text,
    )

    # Максимальная компенсация: цена + 20% + рандом до 200
    compensation = int(product_price * 1.2) + random.randint(10, 200)
    max_compensation = str(compensation)

    return CampaignData(
        name=name,
        product_search=product_name,
        utm_link=utm_link,
        thematic=thematic,
        task=task,
        max_compensation=max_compensation,
    )
